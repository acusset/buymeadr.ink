version: '3.8'

services:
    node:
        build:
            context: .
            args: # from .env file
                NODE_VERSION: ${NODE_VERSION}
                NPM_VERSION: ${NPM_VERSION}
                HTTP_PORT: ${HTTP_PORT}
        environment:
            NODE_ENV: ${NODE_ENV}
            HTTP_PORT: ${HTTP_PORT}
            BASE_URL: ${BASE_URL}
            STRIPE_SECRET_API_KEY: ${STRIPE_SECRET_API_KEY}
            STRIPE_PUBLISHABLE_API_KEY: ${STRIPE_PUBLISHABLE_API_KEY}
        ports:
            - ${HTTP_PORT}:${HTTP_PORT}
        restart: unless-stopped
        volumes:
            - .:/home/node/buymeadr.ink:delegated
            - /home/node/buymeadr.ink/node_modules
